{% extends "base.html" %}

{% block title %}Relatórios{% endblock %}

{% block extra_head %}
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
{% endblock %}

{% block content %}
    <div class="container mt-4 container-section">
        <h4>Gerar Relatório</h4>
        <div class="row mb-3">
            <div class="col-md-2">
                <label for="reportType" class="form-label">Tipo de Relatório:</label>
                <select id="reportType" class="form-select form-select-sm">
                    <option value="services">Serviços</option>
                    <option value="server">Servidor</option>
                </select>
            </div>
            <div class="col-md-2">
                <label for="reportStack" class="form-label">Stack:</label>
                <select id="reportStack" class="form-select form-select-sm">
                    <option value="all">Todas</option>
                </select>
            </div>
            <div class="col-md-2">
                <label for="reportDate" class="form-label">Data:</label>
                <select id="reportDate" class="form-select form-select-sm"></select>
            </div>
            <div class="col-md-2">
                <label for="startHour" class="form-label">Hora Início:</label>
                <input type="time" id="startHour" class="form-control form-control-sm">
            </div>
            <div class="col-md-2">
                <label for="endHour" class="form-label">Hora Fim:</label>
                <input type="time" id="endHour" class="form-control form-control-sm">
            </div>
            <div class="col-md-1 d-flex align-items-end">
                <button id="generateBtn" class="btn btn-primary btn-sm w-100">Gerar</button>
            </div>
            <div class="col-md-1 d-flex align-items-end">
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" id="autoRefresh">
                    <label class="form-check-label" for="autoRefresh">Auto Refresh</label>
                </div>
            </div>
        </div>
    </div>
    <div class="container mb-4">
        <div id="loadingIndicator" class="alert alert-info" style="display:none;">Carregando...</div>
        <div id="noDataIndicator" class="alert alert-warning" style="display:none;"></div>
        <div id="chartContainer" class="chart-flex" style="display:none;"></div>
    </div>
{% endblock %}
{% block scripts %}
    <script>
        const PAGE_DATA = {
            available: {{ available_list | tojson }},
            server_hostname: "{{ server_hostname }}",
            data_url: "{{ url_for('reports.reports_data') }}",
        };
    </script>
    <script src="{{ url_for('static', filename='js/reports.js') }}"></script>
{% endblock %}